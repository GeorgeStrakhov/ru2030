<head>
  <title>Россия 2030 - страна, в которой хочется жить</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  {{> app}}
</body>

<template name="app">
  {{>loading}}
  {{#if currentUser}}
    {{>navbar}}
  {{/if}}
  <div id="wrap">
    <div class="container">
      {{#if currentUser}}
        {{>myApp}}
      {{else}}
        {{>welcome}}
      {{/if}}
    </div>
    <div id="push"></div>
  </div>
  {{>footer}}
</template>

<template name="myApp">
  <div id="innerContent">
    {{#if currentView "404"}}
      {{>page404}}
    {{/if}}
    {{#if currentView "admin"}}
      {{>admin}}
    {{/if}}
    {{#if currentView "settings"}}
      {{>settings}}
    {{/if}}
    {{#if currentView "item"}}
      {{>item}}
    {{/if}}
    {{#if currentView "list"}}
      {{>list}}
    {{/if}}
    {{#if currentView "main"}}
      {{>main}}
    {{/if}}
  </div>
</template>

<template name="loading">
  <div id="loading" class="hide"></div>
</template>

<template name="footer">
  <div id="footer">
    <p class="muted credit centered">
      2012 
      | <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US" class="muted">Some Rights Reserved</a>
      {{#if currentUser}}
        | <a class="muted" href="#settings">настройки</a>
      {{/if}}
      {{#if userRole "superAdmin"}}
        | <a href="#admin" class="muted" class="muted">admin</a>
      {{/if}}
      </p>
  </div>
</template>

<template name="page404">
  <h1>404</h1>
  <h3>страница не найдена :(</h3>
</template>

<template name="settings">
  <div class="row">
    <div class="span12">
      <h3>Настройки:</h3>
      <div>
        <div>
          <form class="form">
            <label>Ваше имя:</label>
            <div>
              <input type="text" class="input" id="userDisaplayName" value="{{userName}}" />
            </div>
            <label>Ваш адрес электронной почты:</label>
              <input type="text" class="input" id="userEmail" value="{{myEmail}}" />
            <div>
              <button class="btn" id="userSaveSettings">сохранить</button>
            </div>
          </form>
        </div>
        <div>
          <hr />
        </div>
        <div>
          <form class="form">
            <button class="btn btn-danger" id="userDelete">удалить мой аккаунт</button>
          </form>
        </div>
    </div>
  </div>
</template>

<template name="welcome">
    <div class="row">
      <div class="span12 centered topSpace">
        <h1>Россия 2030</h1>
        <h5>страна, в которой хочется жить</h5>
      </div>
    </div>
    <div class="row">
      <div class="span12 centered topSpace">
        <div class="well" style="text-align: left">
          <p>Есть страны, которые <strong>любишь</strong>, а есть страны, в которых <strong>хочется жить и растить детей</strong>.</p>
          <p>Мы все <strong>любим</strong> Россию потому, что мы здесь родились, потому что здесь наши близкие, потому что мы думаем на русском языке и читаем русскую литературу...</p>
          <p>Но зачастую, приезжая, например, в Европу, мы понимаем, что вот <strong>здесь хотелось бы жить</strong> и растить детей. Потому, что безопасно, государство тихо делает свою работу, люди на улицах улыбаются и т.д.</p>
          <p>Проект <strong>Россия 2030 - это попытка представить себе Россию такой, в которой нам хотелось бы жить</strong>. Не мечтать о ней, а представить ее, конкретно описать ее. А затем понять, что для этого нужно сделать и кто мог бы объединить нас и воплотить это в жизнь.</p>
          <p>В нашем обществе достаточно разговоров о негативных факторах и сценариях развития событий. Давайте попробуем <strong>продуктивно подискутировать на тему позитивного будущего страны и как к нему прийти</strong>.</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="span12 topSpace">
        <button class="btn btn-large btn-block btn-info" type="button" id="loginButton">Войти с помощью Faceboook</button>
      </div>
    </div>
</template>

<template name="navbar">
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        <a class="brand" href="/">Россия 2030</a>
        <div class="nav-collapse collapse">
          <ul class="nav">
            <li class="{{rootStyle}}"><a href="#">Проект</a></li>
            {{#each allLists}}
              {{>singleNavItem}}
            {{/each}}
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>
</template>

<template name="singleNavItem">
  <li class="{{isActiveList}}"><a href="#/list/{{this.name}}/">{{this.displayName}}</a></li>
</template>

<template name="main">

      <div class="hero-unit">
        <h1>Россия 2030</h1>
        <p>Что должно быть и чего не должно быть в России через 17 лет, чтобы Вам хотелось жить и растить детей здесь и нигде больше? Чего реалистично достигнуть в такой срок? Какие действия каждый из нас и мы все вместе можем предпринять, чтобы приблизиться к этому?</p>
        <p><a class="btn btn-primary btn-large" href="#/list/country/">Вступить в диалог &raquo;</a></p>
      </div>

      <div class="row">
        <div class="span4">
          <h2><a class="" href="#/list/country/">Страна</a></h2>
          <p>В какой России Вам хотелось бы жить? Попробуйте описать ее, возможно она станет ближе и понятней.</p>
        </div>
        <div class="span4">
          <h2><a class="" href="#/list/actions/">Действия</a></h2>
          <p>Что нужно сделать, чтобы жизнь в России улучшилась? Что может сделать государство, бизнес, каждый из нас?</p>
       </div>
        <div class="span4">
          <h2><a class="" href="#/list/leaders/">Лидеры</a></h2>
          <p>Кто может объединить думающих и небезразличных людей страны и сделать "Россию 2030" реальностью?</p>
        </div>
      </div>
</template>

<template name="admin">
  <div class="row">
    <div class="span12">
      {{#if userRole "superAdmin"}}
        <h3>Admin Options:</h3>
        <div>
          <div>
            <form class="form">
              <label><strong>Change user role:</strong></label>
              <div>
                <input type="text" class="input-small" id="userToChangeEmail" placeholder="email" />
                <input type="text" class="input-small" id="userToChangeNewRole" placeholder="new role" />
              </div>
              <div>
                <button class="btn" id="userToChangeSubmit">change</button>
              </div>
            </form>
          </div>
          <div>
            <form class="form">
              <label><strong>Add new list:</strong></label>
              <div>
                <input type="text" class="input-small" id="newListName" placeholder="new list URL" />
                <input type="text" class="input-small" id="newListDisplayName" placeholder="new list name" />
              </div>
              <div>
                <textarea id="newListDescription" placeholder="new list description (optional)"></textarea>
              </div>
              <div>
                <input type="text" class="input-large" id="newListHalfSentence" placeholder="sentence users need to finish (optional)" />
              </div>
              <div>
                <button class="btn" id="newListSubmit">create</button>
              </div>
            </form>
          </div>
          <div>
            <form class="form">
              <label><strong>Update a list:</strong></label>
              <div>
                <input type="text" class="input-small" id="oldListName" placeholder="current list URL" />
                <input type="text" class="input-small" id="updatedListName" placeholder="new list URL" />
                <input type="text" class="input-small" id="updatedListDisplayName" placeholder="new list name" />
              </div>
              <div>
                <textarea id="updatedListDescription" placeholder="new list description (optional)"></textarea>
              </div>
              <div>
                <input type="text" class="input-large" id="updatedListHalfSentence" placeholder="sentence users need to finish (optional)" />
              </div>
              <div>
                <button class="btn" id="updateListSubmit">update
              </div>
            </form>
          </div>
          <hr />
          <div>
            <form class="form">
              <label><strong>Clean up the database:</strong></label>
              <div>
                <input type="text" class="input-large" id="cleanUpDb" placeholder="what you want to clean up: comments, items, lists, users(except admins), everything"/>
              </div>
              <div>
                <button class="btn btn-danger" id="cleanUpBtn">delete all records</button>
              </div>
        </div>
      {{else}}
        <h1>К сожалению, Вам закрыт доступ к этой странице :(</h1>
      {{/if}}
    </div>
  </div>
</template>

<template name="list">
  <div class="row">
    <div class="span12">
      <div class="">
        <h2>{{currentList.displayName}}</h2>
        {{#if currentList.description}}
          <blockquote>
            <p>{{currentList.description}}</p>
          </blockquote>
        {{/if}}
        {{#if currentList.halfSentence}}
          <h4>{{currentList.halfSentence}}...</h4>
        {{/if}}
      </div>
      <div>
        <form class="form">
          <textarea class="span12" id="newItemText" {{#if currentList.halfSentence}}placeHolder="(продолжите предложение)"{{/if}}></textarea>
          <button class="btn btn-large btn-block" id="newItemSubmit">отправить</button>
        </form>
      </div>
    </div>
  </div>
  <div class="container marginDown">
    <div class="pull-left">
      <h4>Что говорят другие:</h4>
    </div>
    <div class="pull-right" style="margin-top: 5px">
      <div class="btn-group" data-toggle="buttons-radio">
        <button type="button" class="btn {{sortByPopularStyle}}" id="sortPopular">популярные</button>
        <button type="button" class="btn {{sortByLatestStyle}}" id="sortLatest">новые</button>
      </div>
    </div>
  </div>
  <div>
        {{#each allItems}}
          {{>singleItem}}
        {{/each}}
  </div>
</template>

<template name="item">
  <div class="row">
    <div class="span12">
      <button class="btn btn-large btn-block" id="backToList">{{currentList.displayName}}</button>
    </div>
  </div>
  <div class="row">
    <div class="span10">
      <div>
        <h2>{{itemDetails.author}}:</h2>
          <blockquote>
            <p>{{currentList.halfSentence}} {{itemDetails.content}}</p>
          </blockquote>
      </div>
    </div>
    <div class="span2">
      <div class="itemRating">
        <button class="btn btn-large btn-block btn-{{itemDetails.ratingStyle}} disabled marginTB">Рейтинг: {{itemDetails.rating}}</button>
        <button class="btn btn-large btn-block btn-success marginTB" id="thumbsUp">согласиться</button>
        <button class="btn btn-large btn-block btn-danger marginTB" id="thumbsDown">не согласиться</button>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="span12">
      <div>
        <form class="form">
          <textarea class="span12" id="newCommentText"></textarea>
          <button class="btn btn-large btn-block" id="newCommentSubmit">прокомментировать</button>
        </form>
      </div>
    </div>
  </div>
  <div class="row marginDown">
    <div class="span12">
      <div class="pull-left">
        <h4>Что говорят другие:</h4>
      </div>
      <div class="pull-right" style="margin-top: 5px">
        <div class="btn-group" data-toggle="buttons-radio">
          <button type="button" class="btn {{sortByPopularStyle}}" id="sortPopular">популярные</button>
          <button type="button" class="btn {{sortByLatestStyle}}" id="sortLatest">новые</button>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="span12 commentsSection">
      {{#each itemComments}}
        {{>singleComment}}
      {{/each}}
    </div>
  </div>
</template>

<template name="singleComment">
  <div class="row singleItemRow">
    <div class="span1 pull-left">
      <div class="marginDown">
        <span class="label {{comment.ratingStyle}}">{{comment.rating}}</span>
        <span class="thumbsUpDown"><a href="#" id="thumbsUpComment"><i class="icon-thumbs-up"></i></a></span>
        <span class="thumbsUpDown"><a href="#" id="thumbsDownComment"><i class="icon-thumbs-down"></i></a></span>
      </div>
    </div>  
    <div class="span11 pull-left">
      <div>
        <p class="well">
          {{this.content}}
        </p>
        <p class="alignRight"><small>- {{comment.author}}</small></p>
      </div>
    </div>
  </div>
  <div class="row lineAfter">
    <div class="span12">
      <hr />
    </div>
  </div>
</template>

<template name="singleItem">
  <div class="row singleItemRow">
    <div class="span1 pull-left">
      <div class="">
        <span class="label {{itemRatingStyle}}">{{itemRating}}</span>
        <span class="thumbsUpDown"><a href="#" id="thumbsUpLink"><i class="icon-thumbs-up"></i></a></span>
        <span class="thumbsUpDown"><a href="#" id="thumbsDownLink"><i class="icon-thumbs-down"></i></a></span>
      </div>
      <div class="discussionLink"><a href="{{itemUrl}}">обсуждение</a></div>
    </div>  
    <div class="span11 pull-left">
      <div>
        <p class="well">
          {{#if currentList.halfSentence}}
            {{currentList.halfSentence}}
          {{/if}} 
          {{this.content}}
        </p>
        <p class="alignRight"><small>- {{author}}</small></p>
      </div>
    </div>
  </div>
  <div class="row lineAfter">
    <div class="span12">
      <hr />
    </div>
  </div>
</template>
